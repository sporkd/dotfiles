#! /usr/bin/env zsh

{{ template "printers.zsh" }}

_print_running_script "$0"

echo -e "\n${FG_YELLOW}[running script]${RESET} $0\n"

set -euo pipefail

# Kitty
_print_installing "kitty"
curl -L https://sw.kovidgoyal.net/kitty/installer.sh | sh /dev/stdin

if [[ "$TERM" != xterm-kitty ]]; then
  if command -v kitty &> /dev/null; then
    echo
    _print_prog kitty "Continue in kitty terminal by running ${FG_YELLOW}chezmoi apply${RESET}"
    echo
    _prompt -p "Continue in kitty? [Y|n] " -d "Y" resp
    if [[ $resp =~ ^(y|yes|Y) ]]; then
      kitty -1 --hold & disown
    fi
  fi
fi

echo
_print_ok
